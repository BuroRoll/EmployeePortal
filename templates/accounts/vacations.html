<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width">
    <title>SKB_LAB | Мой график отпусков</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.ico' %}"/>
    <link rel="stylesheet" href={% static 'style/style.css' %}>
    <link rel="stylesheet" href={% static 'style/adaptive-style.css' %}>
    <link rel="stylesheet" href={% static 'style/style-calendar.css' %}>
    <link rel="stylesheet" href={% static 'style/style-calendar.css' %}>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital@0;1&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel='stylesheet' href='/static/icons/font/css/open-iconic.css'>
</head>
<body class="grey">
<header>
    <div class="header-container">
        <a href="/">
            <img class="logo" src={% static 'img/logo.png' %} alt="Логотип">
        </a>
        <div class="right-header">
            <h1>Личный кабинет</h1>
            <div class="delta-header">
                <img class="profile-header" alt="Аватар" src=/media/{{ request.user.photo }} >
                <h2 class="nickname-header">{{ request.user.login }}</h2>
                <a href="/logout" style="height: 28px"><img src={% static 'img/out.png' %} alt="Выход" width="28px"
                                                            height="28px"></a>
            </div>
        </div>
    </div>
</header>
<div class="content-container">
    <div class="left-menu">
        <ul>
            <a href="/account">
                <li class="left-menu-element"><span class="oi" data-glyph="person" aria-hidden="true"></span></span>
                    <span class="left-menu-text">Профиль</span></li>
            </a>
            <a href="/vacations/">
                <li class="left-menu-element"><span class="oi" data-glyph="calendar" aria-hidden="true"></span><span
                        class="left-menu-text">График отпусков</span></li>
            </a>
            <a href="/get_access/">
                <li class="left-menu-element"><span class="oi" data-glyph="wrench" aria-hidden="true"></span><span
                        class="left-menu-text">Доступы к системам</span></li>
            </a>
            <a href="/get_all_employees">
                <li class="left-menu-element"><span class="oi" data-glyph="people" aria-hidden="true"></span>
                    <span
                            class="left-menu-text">Сотрудники</span></li>
            </a>
            {% if request.user.position.access_to_candidates %}
                <a href="/get_all_candidates">
                    <li class="left-menu-element"><span class="oi" data-glyph="spreadsheet" aria-hidden="true"></span>
                        <span
                                class="left-menu-text">Кандидаты</span></li>
                </a>
            {% endif %}
            {% if request.user.position.access_to_vacation_list %}
                <a href="/download_vacations">
                    <li class="left-menu-element"><span class="oi" data-glyph="folder" aria-hidden="true"></span>
                        <span
                                class="left-menu-text">Список отпусков</span></li>
                </a>
            {% endif %}
            <a href="/events">
                <li class="left-menu-element"><span class="oi" data-glyph="bullhorn" aria-hidden="true"></span>
                    <span
                            class="left-menu-text">Мероприятия</span></li>
            </a>
            <a href="/devices">
                <li class="left-menu-element"><span class="oi" data-glyph="monitor" aria-hidden="true"></span>
                    <span
                            class="left-menu-text">Тестовые девайсы</span></li>
            </a>
            <a href="/map">
                <li class="left-menu-element"><span class="oi" data-glyph="globe" aria-hidden="true"></span>
                    <span
                            class="left-menu-text">Карта путешествий</span></li>
            </a>
        </ul>
    </div>
    <div>
        <div class="high-calendar">
            <div class="calendar-count-block">
                <div class="calendar-text">Оставшееся количество дней отпуска для выбора</div>
                <div class="calendar-count"></div>
            </div>
            <div class="right-high-calendar">
                <i><u>Перед выбором Вашего отпуска пожалуйста, согласуйте его с руководством</u></i>
            </div>
        </div>
        <div class="right-calendar-block">
            <div class="cal-cont">
                <div class="calendar-container">

                </div>
                <div class="calendar-sub-btn">Подтвердить выбор</div>

            </div>

        </div>

    </div>
</div>
<div id="snackbar">Данные успешно отправлены</div>
<script src={% static "js/vacationJS.js" %}></script>
<script>
    (async function () {
        let response = await fetch('/get_vacations/' + {{ request.user.pk }} +'/?format=json', {
            method: 'GET'
        });
        let answer = await response.json();
        let count = answer.vacation_days + ''
        let datas = answer.vacation

        setCountDays(count)
        setDays(datas)
    })();
</script>
</body>
</html>